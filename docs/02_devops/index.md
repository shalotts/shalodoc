---
parent: DevOps
title: Начало работы
order: 1
---

# DevOps

::: warning
Текст не отформатирован
:::

Постараемся сделать конфигурацию максимально простую, требующую лишь базовые навыки системного
администрирования. В основном будем делать напор на UI, чем на CLI.

## Определение потребностей

Прежде чем нарисовать дизайн приложения, определяют главные потребности пользователя, на основе
их создаются черновые макеты (прототипы), когда черновой набросок исправлен, дорисовывают
завитушки и вешают канделябры, ~~а модные дизайнеры одевают кандибобер~~.

Виду к тому, здесь аналогичная ситуация, есть пользователи, есть приложения. Если руководство не
поощряет ведение блога или документации это не значит что он не нужен. Разработчики охотно идут
на уступки в пользу новшеств, в отличие от рядовых сотрудников.

## Несчастный случай или авария?

Вас не заставляют играть честно, большинство дизайнеров приложений прибегает к [темным паттернам](https://bbbl.dev/articles/dark-patterns-manipulation).
В одной компании все проекты хранились на `WinXp`, пока в один ~~прекрасный~~ несчастный момент,
не появился вирус шифровальщик. Важные данные были в `backup`, ничего важного не пострадало. На
месте покойной `XP` пришли новоиспеченные `окна`. Совпадение? Не думаю!

В некоторых ситуациях у вас появиться соблазн к манипуляциям, они будут строиться вокруг
 вашего твёрдого опыта и высокой ауры компетенции. Не заблуждайтесь! Вы всегда можете ошибиться.
Собирайте доказательства, проверяйте гипотезы.

Не злоупотребляйте доверием. От вас зависит удобство работы в компании. Обеспечьте сотрудников
необходимым окружением.


## Начальная OC
В качестве OC для выделенной машины лучше всего выбирать [debian](https://www.debian.org/).
Debian является классикой для сервера, он не
имеет yaml конфигов (как ubuntu) в которых нужно соблюдать табуляцую (подойдет только для любителей
vim/vi).
Имеет более простую настройку сети, особенно если в момент инсталляции вы не имеете прямого
выхода в интернет. Есть хорошая альтернатива CentOS, но это на
любителя. [Ссылка](https://www.digitalocean.com/community/tutorials/initial-server-setup-with-debian-10)
на базовую установку...

## Виртуализация

Для работы с виртуализацией возьмём классический стэк на базе
`docker` + `portainer`. Позволит быстро развернуть сайт.

Неспорю вы можете развернуть proxmox или vwware и городить кучу
виртуалок, но есть один минус, это конфиги. В докере они хранятся отдельных форматах, в
других случая вам придется использовать bash файл. К тому же вы поощряете разработчиков
поднимать полностью ручное окружение. Напоминаю! Установка бэкенда laravel может быть не самой
приятной вещью в вашей жизни, особенно если это не последняя версия. Вы смогли настройть?
Молодцы! Пригласили нового члена команды? Мучайся сам!

Продвинутый уровень виртуализации включает:

- [distroless](https://habr.com/ru/articles/710968)
- [Kubes](https://habr.com/ru/articles/258443/)
- [Ansible](https://habr.com/ru/companies/slurm/articles/714000/)
- [SelverLess](https://habr.com/ru/companies/cloud4y/articles/541422/)

Советую не читать, в нашем примере маленькая компания. Меньше знаешь, крепче спишь. Есть идиоты,
которые используют кубы в повседневности, но это тоже элемент оркестровки и безотказной
архитектуры, такое только влетит в копеечку.

## Подготовление
Я выкупил домен `shalotts.site` для проведения опытов, именно на нём я буду создавать
поддомены
для внутренних ресурсов. Я выбрал [dreamhost](https://dreamhost.com) из-за простоты и цены. Ещё
он хорошо совместим с cloudflare, поэтому я добавил в dns некоторые записи.
<img height="300" src="https://res.cloudinary.com/dr5gcup5n/image/upload/v1709741967/shalodoc/sfshdk9504jrqvbiczif.png" width="300"/>

В cloudflare мы добавляем новый сайт с бесплатным тарифным планом `free`, далее отправляемся в
настройки `DNS` и прописываем `NS` записи (проверить, это кажется не нужно)
<img height="300" src="https://res.cloudinary.com/dr5gcup5n/image/upload/v1709742542/shalodoc/dpi3lejaemgjvonijwbc.png" width="300"/>

Далее я буду в каждый стэк добавлять контейнер c `clouflared`, чтобы пробрасывать приложения из
`localhost`. Из данных для контейнера будет необходим только `token`
наружу.


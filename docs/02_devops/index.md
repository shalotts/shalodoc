---
parent: DevOps
title: Начало работы
order: 0
---

# DevOps

::: warning
Текст не отформатирован
:::

`Не все могут позволить себе Windows, точнее поставить может каждый, но не каждый может его
активировать`

Постараемся сделать конфигурацию максимально простую, требующую лишь базовые навыки системного
администрирования. В основном будем делать напор на UI, чем на CLI.

Ваша задача предоставить все необходимое для разработки. Старайтесь чтобы ваши соотрудники не
тратили кучу времени на выполнение безумно длинных мануалов или пытались сами разобраться как
что поднять. Разработчики не должны про вас вспоминать каждый день. Настроил все? Читай себе
спокойно linux format и жди когда Аня позовёт починить принтер.

**Что необходимо всем:**

* Быстрый доступ к сайту и его статистики без повторной авторизации (Oauth).
* Доступ к менеджеру паролей (в случае если oauth невозможен)
* Хранение статики.

**Что необходимо разработчику:**

* В первую очередь у разработчиков должна быть песочница, они должны без проблем публиковать свои
* тестовые приложения наружу и желательно без вашей помощи.
	* Domain (duck dns, noip, cloudflare) + http2 + tsl 1.2

* Хранить данные, код в гите и CDN для хранения статики (картинок, видео)
* Доступ к артефактам.

**Что необходимо тестировщику:**

* Доступ к артефактам.

**Что необходимо дизайнеру:**

* Публикация прототипов дизайна (опционально, если есть self-hosted решение)

**Что необходимо менеджеру:**

* ...

::: warning
... рассказать про структуру
:::

В качестве OC для выделенной машины лучше всего выбирать [debian](https://www.debian.org/).
Debian является классикой для сервера, он не
имеет yaml конфигов (как ubuntu) в которых нужно соблюдать табуляцую (подойдет только для любителей
vim/vi).
Имеет более простую настройку сети, особенно если в момент инсталляции вы не имеете прямого
выхода в интернет. Есть хорошая альтернатива CentOS, но это на
любителя. [Ссылка](https://www.digitalocean.com/community/tutorials/initial-server-setup-with-debian-10)
на базовую
установку...

## Виртуализация

Для работы с виртуализацией возьмём классический стэк на базе

`nginx proxy manager` + `portainer` + `traeffic`. Позволит быстро развернуть сайт.

Неспорю вы можете развернуть proxmox или vwware и городить кучу
виртуалок, но есть один минус, это конфиги. В докере они хранятся отдельных форматах, в
других случая вам придется использовать bash файл. К тому же вы поощряете разработчиков
поднимать полностью ручное окружение. Напоминаю! Установка бэкенда laravel может быть не самой
приятной вещью в вашей жизни, особенно если это не последняя версия. Вы смогли настройть?
Молодцы! Пригласили нового члена команды? Мучайся сам!

Продвинутого уровень виртуализации включает:

- [distroless](https://habr.com/ru/articles/710968)
- [Kubes](https://habr.com/ru/articles/258443/)
- [Ansible](https://habr.com/ru/companies/slurm/articles/714000/)
- [SelverLess](https://habr.com/ru/companies/cloud4y/articles/541422/)

Советую не читать, в нашем примере маленькая компания. Меньше знаешь, крепче спишь. Есть идиоты,
которые используют кубы в повседневности, но это тоже элемент оркестровки и безотказной
архитектуры, такое только влетит в копеечку.

## Единая точка входа

В компанию могут поступать новые сотрудники, в случае их найма/увальнения придётся
добавлять/лишать доступа. Также бывают визитеры, люди которым нужен временный доступ к ресурсам
компании. Речь идёт не только про доступ к wifi (freeradius мы не будем рассматривать), а
возможность получить по одному логину/паролю ко всем сервисам компании.

## Production != Development

Допустим вы знаете как развернуть nginx. А вы можете его настроить? Когда я захожу на сайты с
nginx я вижу в заголовках версию nginx. По советам безопасности нужно
использовать последнею версию и скрывать номер версии в заголовке (http header). Как думаете
сколько компаний выполняют базовые требования необходимые для оптимизации и безопасности? А для
этого не нужно что-то придумывать в сети
есть [boilerplate](https://github.com/h5bp/server-configs-nginx)
для nginx. В то время как cloudflare использует http3, есть сайты на http1.1 без сертификатов.
Разница в скорости htt1.1 c h2 существенна, а если включить hsts?

